{"version":3,"sources":["core/review/review.ts","core/review/eventHandler.ts","core/review/index.ts"],"names":["reviewApiUrl","courseId","name","email","this","restoreUser","data","window","navigator","onLine","COMMENT_SENDING_FAILED","createdByName","createdBy","requester","post","headers","CONTENT_TYPES","JSON","status","STATUS_OK","localStorage","getItem","REVIEW_USER_EMAIL","REVIEW_USER_NAME","setItem","EventHandler","handlers","event","events","REVIEW_INITIALIZED","instance","reviewInitialize","bind","COMMENT_SENT","sendComment","REVIEWER_AUTHORIZED","userAuthorized","REVIEW_RESTORE_USER","review","initialize","sendCommentRequest","storeUser","BaseEventHandler","Review","eventHandler","on","off"],"mappings":"iOA2De,M,iDAjDbA,kB,OACAC,c,OACAC,U,OACAC,W,4DAE6C,IAAhCH,EAA+B,EAA/BA,aAAcC,EAAiB,EAAjBA,SACzBG,KAAKJ,aAAeA,EACpBI,KAAKH,SAAWA,EAChBG,KAAKC,gB,uHAGoBC,E,EAAAA,KACZC,OAAOC,UAAUC,O,yCAErBC,K,cAETJ,EAAKK,cAAgBP,KAAKF,KAC1BI,EAAKM,UAAYR,KAAKD,MACtBG,EAAKL,SAAWG,KAAKH,S,mBACAY,IAAUC,KAAV,UAAkBV,KAAKJ,aAAvB,YAA+C,CAClEe,QAAS,CAAE,eAAgBC,IAAcC,MACzCX,U,UAGsB,M,OAAXY,O,0CACJR,K,iCAGFS,K,sFAOP,OAHAf,KAAKD,MAAQiB,aAAaC,QAAQC,KAClClB,KAAKF,KAAOkB,aAAaC,QAAQE,KAE1B,CACLrB,KAAME,KAAKF,KACXC,MAAOC,KAAKD,S,gCAING,GACRc,aAAaI,QAAQF,IAAmBhB,EAAKH,OAC7CiB,aAAaI,QAAQD,IAAkBjB,EAAKJ,MAC5CE,KAAKD,MAAQG,EAAKH,MAClBC,KAAKF,KAAOI,EAAKJ,S,MCnDAuB,E,YAEnB,aAAe,IAAD,8BACZ,+CAFFC,cACc,EAEZ,EAAKA,SAAW,CACd,CAAEC,MAAOC,IAAOC,mBAAoBC,SAAU,EAAKC,iBAAiBC,KAAtB,iBAC9C,CAAEL,MAAOC,IAAOK,aAAcH,SAAU,EAAKI,YAAYF,KAAjB,iBACxC,CAAEL,MAAOC,IAAOO,oBAAqBL,SAAU,EAAKM,eAAeJ,KAApB,iBAC/C,CAAEL,MAAOC,IAAOS,oBAAqBP,SAAU,EAAKzB,YAAY2B,KAAjB,kBANrC,E,iFAUqC,IAAhChC,EAA+B,EAA/BA,aAAcC,EAAiB,EAAjBA,SAC/BqC,EAAOC,WAAW,CAAEvC,eAAcC,e,qCAGR,IAAdK,EAAa,EAAbA,KACZ,OAAOgC,EAAOE,mBAAmB,CAAElC,W,wCAGC,IAArBJ,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,MACrBmC,EAAOG,UAAU,CAAEvC,OAAMC,Y,oCAIzB,OAAOmC,EAAOjC,kB,GAzBwBqC,KCFpCC,E,WAEJ,aAAe,yBADfC,kBACc,EACZxC,KAAKwC,aAAe,IAAInB,E,wDAIxBrB,KAAKwC,aAAaC,O,oCAIlBzC,KAAKwC,aAAaE,U,KAIP,cAAIH","file":"static/js/6.702d1aa8.chunk.js","sourcesContent":["import requester from 'core/http/requester';\nimport { CONTENT_TYPES } from 'constants/common';\nimport {\n  COMMENT_SENDING_FAILED,\n  STATUS_OK,\n  REVIEW_USER_EMAIL,\n  REVIEW_USER_NAME\n} from 'constants/review';\n\nclass Review {\n  reviewApiUrl: any;\n  courseId: any;\n  name: any;\n  email: any;\n\n  initialize({ reviewApiUrl, courseId }: any) {\n    this.reviewApiUrl = reviewApiUrl;\n    this.courseId = courseId;\n    this.restoreUser();\n  }\n\n  async sendCommentRequest({ data }: any) {\n    let online = window.navigator.onLine;\n    if (!online) {\n      return COMMENT_SENDING_FAILED;\n    }\n    data.createdByName = this.name;\n    data.createdBy = this.email;\n    data.courseId = this.courseId;\n    let response = await requester.post(`${this.reviewApiUrl}comments`, {\n      headers: { 'Content-Type': CONTENT_TYPES.JSON },\n      data\n    });\n\n    if (response.status !== 200) {\n      return COMMENT_SENDING_FAILED;\n    }\n\n    return STATUS_OK;\n  }\n\n  restoreUser() {\n    this.email = localStorage.getItem(REVIEW_USER_EMAIL);\n    this.name = localStorage.getItem(REVIEW_USER_NAME);\n\n    return {\n      name: this.name,\n      email: this.email\n    };\n  }\n\n  storeUser(data: any) {\n    localStorage.setItem(REVIEW_USER_EMAIL, data.email);\n    localStorage.setItem(REVIEW_USER_NAME, data.name);\n    this.email = data.email;\n    this.name = data.name;\n  }\n}\n\nexport default new Review();\n","import { events } from 'core/events/eventEmitter';\nimport BaseEventHandler from 'core/events/eventHandler';\nimport review from './review';\n\nexport default class EventHandler extends BaseEventHandler {\n  handlers: any;\n  constructor() {\n    super();\n    this.handlers = [\n      { event: events.REVIEW_INITIALIZED, instance: this.reviewInitialize.bind(this) },\n      { event: events.COMMENT_SENT, instance: this.sendComment.bind(this) },\n      { event: events.REVIEWER_AUTHORIZED, instance: this.userAuthorized.bind(this) },\n      { event: events.REVIEW_RESTORE_USER, instance: this.restoreUser.bind(this) }\n    ];\n  }\n\n  reviewInitialize({ reviewApiUrl, courseId }: any) {\n    review.initialize({ reviewApiUrl, courseId });\n  }\n\n  sendComment({ data }: any) {\n    return review.sendCommentRequest({ data });\n  }\n\n  userAuthorized({ name, email }: any) {\n    review.storeUser({ name, email });\n  }\n\n  restoreUser() {\n    return review.restoreUser();\n  }\n}\n","import EventHandler from './eventHandler';\n\nclass Review {\n  eventHandler: any;\n  constructor() {\n    this.eventHandler = new EventHandler();\n  }\n\n  subscribe() {\n    this.eventHandler.on();\n  }\n\n  unsubscribe() {\n    this.eventHandler.off();\n  }\n}\n\nexport default new Review();\n"],"sourceRoot":""}